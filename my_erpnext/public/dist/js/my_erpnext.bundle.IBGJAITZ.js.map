{
  "version": 3,
  "sources": ["../../../../../apps/my_erpnext/my_erpnext/public/js/company_select.js"],
  "sourcesContent": ["function sleep(time) {\n  return new Promise(resolve => setTimeout(resolve,time));\n}\nasync function get_cur_company(){\n        await sleep(1000);\n\tvar companies = frappe.get_list('Company');\n\tif (companies.length>1)\n\t{\n\t\tvar option_data = ''; \n        \tfor (var i=0;i<companies.length;i++)\n\t\t{\n\t\t\toption_data = option_data + '<option value=' + companies[i].name + '>' + companies[i].name + '</option>';\n\t\t}\n\t\tvar insert_data = \"<select id='company-select' class='form-control' style='width: auto;'>\" + option_data;\n\t\t$(\"form:first\").after(insert_data);\n\t\tvar d = await frappe.call({method:\"frappe.core.doctype.session_default_settings.session_default_settings.get_session_default_values\",});\n\t\tvar cur_company = JSON.parse(d.message)[0].default;\n\t\t/*console.log(cur_company);*/\n\t\t$('#company-select').val(cur_company);\n\t\t$('#company-select').on('change', function() {\n\t\t\tfrappe.call({\n\t\t\t    method: \"frappe.core.doctype.session_default_settings.session_default_settings.set_session_default_values\",\n\t\t\t    args: {\n\t\t\t\t    default_values: {\"company\": this.value,\"undefined\":\"\",\"settings\":\"\"},\n\t\t\t    },\n\t\t\t    callback: function (data) {\n\t\t\t\t    if (data.message == \"success\") {\n\t\t\t\t\t    frappe.show_alert({\n\t\t\t\t\t\t    message: __(\"Session Defaults Saved\"),\n\t\t\t\t\t\t    indicator: \"green\",\n\t\t\t\t\t    });\n\t\t\t\t\t    frappe.ui.toolbar.clear_cache();\n\t\t\t\t    } else {\n\t\t\t\t\t    frappe.show_alert({\n\t\t\t\t\t\t    message: __(\n\t\t\t\t\t\t\t    \"An error occurred while setting Session Defaults\"\n\t\t\t\t\t\t    ),\n\t\t\t\t\t\t    indicator: \"red\",\n\t\t\t\t\t    });\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t});\n\t\t});\n\t}\n};\nget_cur_company();\n"],
  "mappings": "MAAA,SAASA,EAAMC,EAAM,CACnB,OAAO,IAAI,QAAQC,GAAW,WAAWA,EAAQD,CAAI,CAAC,CACxD,CACA,eAAeE,GAAiB,CACxB,MAAMH,EAAM,GAAI,EACvB,IAAII,EAAY,OAAO,SAAS,SAAS,EACzC,GAAIA,EAAU,OAAO,EACrB,CAEQ,QADHC,EAAc,GACFC,EAAE,EAAEA,EAAEF,EAAU,OAAOE,IAEtCD,EAAcA,EAAc,iBAAmBD,EAAUE,GAAG,KAAO,IAAMF,EAAUE,GAAG,KAAO,YAE9F,IAAIC,EAAc,yEAA2EF,EAC7F,EAAE,YAAY,EAAE,MAAME,CAAW,EACjC,IAAIC,EAAI,MAAM,OAAO,KAAK,CAAC,OAAO,kGAAmG,CAAC,EAClIC,EAAc,KAAK,MAAMD,EAAE,OAAO,EAAE,GAAG,QAE3C,EAAE,iBAAiB,EAAE,IAAIC,CAAW,EACpC,EAAE,iBAAiB,EAAE,GAAG,SAAU,UAAW,CAC5C,OAAO,KAAK,CACR,OAAQ,mGACR,KAAM,CACL,eAAgB,CAAC,QAAW,KAAK,MAAM,UAAY,GAAG,SAAW,EAAE,CACpE,EACA,SAAU,SAAUC,EAAM,CACrBA,EAAK,SAAW,WACnB,OAAO,WAAW,CACjB,QAAS,GAAG,wBAAwB,EACpC,UAAW,OACZ,CAAC,EACD,OAAO,GAAG,QAAQ,YAAY,GAE9B,OAAO,WAAW,CACjB,QAAS,GACR,kDACD,EACA,UAAW,KACZ,CAAC,CAEH,CACJ,CAAC,CACF,CAAC,CACF,CACD,CACAP,EAAgB",
  "names": ["sleep", "time", "resolve", "get_cur_company", "companies", "option_data", "i", "insert_data", "d", "cur_company", "data"]
}
